import{_,o,c as r,b as s,t as i,d as h,F as m,r as v,g as u,e as a}from"./index-c0381769.js";const p={name:"ResultView",props:{id:{type:String,required:!0}},data(){return{quiz:null,result:null,answers:[],levelUp:!1,previousLevel:1,currentLevel:1,earnedBadges:[],recommendedQuizzes:[]}},created(){this.fetchResult(),this.fetchRecommendedQuizzes()},methods:{fetchResult(){this.$store.dispatch("fetchQuiz",this.id).then(()=>{this.quiz=this.$store.state.quiz.currentQuiz,this.result=this.$store.state.quiz.result,this.answers=this.$store.state.quiz.answers;const n=this.$store.state.user;n.progress.level>this.previousLevel&&(this.levelUp=!0,this.currentLevel=n.progress.level),this.result&&this.result.score>=80&&this.earnedBadges.push({id:"high_score",name:"ハイスコアラー",icon:"mdi mdi-medal"})})},fetchRecommendedQuizzes(){this.$store.dispatch("fetchQuizzes").then(()=>{const n=this.$store.state.quiz.quizzes;this.recommendedQuizzes=n.filter(e=>e.id!==this.id).slice(0,2)})},getCategoryIcon(n){return{marketing:"mdi mdi-bullhorn",finance:"mdi mdi-cash",strategy:"mdi mdi-chess-knight",leadership:"mdi mdi-account-group"}[n]||"mdi mdi-help-circle"},retryQuiz(){this.$router.push(`/quiz/${this.id}`)},goToHome(){this.$router.push("/home")},startQuiz(n){this.$router.push(`/quiz/${n}`)}}},g={class:"result-view"},z={class:"result-header"},f={class:"quiz-title"},y={class:"result-summary"},k={class:"score-circle"},b={class:"score"},Q={class:"result-stats"},w={class:"stat-item"},q={class:"stat-info"},C={class:"stat-value"},x={class:"stat-item"},R={class:"stat-info"},B={class:"stat-value"},L={key:0,class:"level-up-card"},T={class:"level-up-text"},V={key:1,class:"badges-section"},H={class:"badges-grid"},I={class:"badge-icon"},N={class:"badge-name"},U={class:"answers-section"},E={class:"answers-list"},F={class:"question-number"},P={class:"question-text"},S={key:0,class:"mdi mdi-check"},X={key:1,class:"mdi mdi-close"},A={class:"action-buttons"},D={class:"recommendations"},j={class:"quiz-cards"},G=["onClick"],J={class:"quiz-info"},K={class:"quiz-meta"};function M(n,e,O,W,l,d){return o(),r("div",g,[s("header",z,[e[2]||(e[2]=s("h1",null,"クイズ結果",-1)),s("div",f,i(l.quiz.title),1)]),s("div",y,[s("div",k,[s("div",b,i(l.result.score)+"%",1),e[3]||(e[3]=s("div",{class:"score-text"},"正解率",-1))]),s("div",Q,[s("div",w,[e[5]||(e[5]=s("i",{class:"mdi mdi-check-circle"},null,-1)),s("div",q,[s("div",C,i(l.result.correctAnswers)+"/"+i(l.result.totalQuestions),1),e[4]||(e[4]=s("div",{class:"stat-label"},"正解数",-1))])]),s("div",x,[e[7]||(e[7]=s("i",{class:"mdi mdi-star"},null,-1)),s("div",R,[s("div",B,"+"+i(l.result.xpEarned),1),e[6]||(e[6]=s("div",{class:"stat-label"},"獲得XP",-1))])])])]),l.levelUp?(o(),r("div",L,[e[9]||(e[9]=s("div",{class:"level-up-icon"},[s("i",{class:"mdi mdi-trophy"})],-1)),s("div",T,[e[8]||(e[8]=s("h3",null,"レベルアップ！",-1)),s("p",null,"レベル "+i(l.previousLevel)+" → レベル "+i(l.currentLevel),1)])])):h("",!0),l.earnedBadges.length>0?(o(),r("div",V,[e[10]||(e[10]=s("h2",null,"獲得バッジ",-1)),s("div",H,[(o(!0),r(m,null,v(l.earnedBadges,t=>(o(),r("div",{key:t.id,class:"badge-item"},[s("div",I,[s("i",{class:a(t.icon)},null,2)]),s("div",N,i(t.name),1)]))),128))])])):h("",!0),s("div",U,[e[11]||(e[11]=s("h2",null,"解答詳細",-1)),s("div",E,[(o(!0),r(m,null,v(l.quiz.questions,(t,c)=>(o(),r("div",{key:t.id,class:"answer-item"},[s("div",F,"問題 "+i(c+1),1),s("div",P,i(t.text),1),s("div",{class:a(["answer-result",{correct:l.answers[c].isCorrect}])},[l.answers[c].isCorrect?(o(),r("i",S)):(o(),r("i",X)),u(" "+i(l.answers[c].isCorrect?"正解":"不正解"),1)],2)]))),128))])]),s("div",A,[s("button",{onClick:e[0]||(e[0]=(...t)=>d.retryQuiz&&d.retryQuiz(...t)),class:"btn btn-outline"},e[12]||(e[12]=[s("i",{class:"mdi mdi-replay"},null,-1),u(" もう一度挑戦 ")])),s("button",{onClick:e[1]||(e[1]=(...t)=>d.goToHome&&d.goToHome(...t)),class:"btn btn-primary"},e[13]||(e[13]=[u(" ホームに戻る "),s("i",{class:"mdi mdi-home"},null,-1)]))]),s("div",D,[e[17]||(e[17]=s("h2",null,"次におすすめ",-1)),s("div",j,[(o(!0),r(m,null,v(l.recommendedQuizzes,t=>(o(),r("div",{key:t.id,class:"quiz-card",onClick:c=>d.startQuiz(t.id)},[s("div",{class:a(["quiz-category",t.category])},[s("i",{class:a(d.getCategoryIcon(t.category))},null,2)],2),s("div",J,[s("h4",null,i(t.title),1),s("div",K,[s("span",null,[e[14]||(e[14]=s("i",{class:"mdi mdi-help-circle"},null,-1)),u(" "+i(t.questions)+" 問",1)]),s("span",null,[e[15]||(e[15]=s("i",{class:"mdi mdi-clock-outline"},null,-1)),u(" "+i(t.duration)+" 分",1)]),s("span",null,[e[16]||(e[16]=s("i",{class:"mdi mdi-star"},null,-1)),u(" "+i(t.xpReward)+" XP",1)])]),s("div",{class:a(["difficulty-badge",t.difficulty])},i(t.difficulty),3)])],8,G))),128))])])])}const Z=_(p,[["render",M],["__scopeId","data-v-2ee6f9d4"]]);export{Z as default};
