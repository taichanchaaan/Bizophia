import{_ as h,o as r,c as o,b as t,n as a,t as u,e as d,F as _,r as Q,d as c}from"./index-c0381769.js";const m={name:"QuizView",props:{id:{type:String,required:!0}},data(){return{quiz:null,currentQuestionIndex:1,selectedOption:null,showAnswer:!1,showExitModal:!1}},computed:{totalQuestions(){return this.quiz?this.quiz.questions.length:0},currentQuestion(){return!this.quiz||!this.quiz.questions?null:this.quiz.questions[this.currentQuestionIndex-1]}},created(){this.fetchQuiz()},methods:{fetchQuiz(){this.$store.dispatch("fetchQuiz",this.id).then(()=>{this.quiz=this.$store.state.quiz.currentQuiz,this.quiz?this.$store.dispatch("startQuiz"):(alert("クイズが見つかりませんでした"),this.$router.push("/quiz-selection"))})},getCategoryName(l){return{marketing:"マーケティング",finance:"ファイナンス",strategy:"戦略",leadership:"リーダーシップ"}[l]||l},selectOption(l){this.showAnswer||(this.selectedOption=l)},checkAnswer(){this.selectedOption&&(this.showAnswer=!0,this.$store.dispatch("answerQuestion",{questionId:this.currentQuestion.id,answerId:this.selectedOption}))},nextQuestion(){this.selectedOption=null,this.showAnswer=!1,this.currentQuestionIndex++},finishQuiz(){this.$router.push(`/result/${this.id}`)},confirmExit(){this.showExitModal=!0},exitQuiz(){this.$router.push("/quiz-selection")}}},z={class:"quiz-view"},w={class:"quiz-header"},x={class:"progress-bar"},k={class:"quiz-info"},b={class:"question-counter"},f={key:0,class:"question-area"},p={class:"question-text"},y={class:"options-list"},q=["onClick"],v={class:"option-marker"},g={class:"option-text"},C={key:0,class:"option-icon"},A={key:0,class:"mdi mdi-check"},O={key:1,class:"mdi mdi-close"},E={key:0,class:"explanation"},I={class:"action-buttons"},M=["disabled"],N={key:1,class:"modal"},B={class:"modal-content"},S={class:"modal-actions"};function V(l,e,F,D,n,i){return r(),o("div",z,[t("header",w,[t("div",x,[t("div",{class:"progress",style:a({width:`${n.currentQuestionIndex/i.totalQuestions*100}%`})},null,4)]),t("div",k,[t("span",b,u(n.currentQuestionIndex)+"/"+u(i.totalQuestions),1),t("span",{class:d(["category-badge",n.quiz.category])},u(i.getCategoryName(n.quiz.category)),3)])]),i.currentQuestion?(r(),o("div",f,[t("h2",p,u(i.currentQuestion.text),1),t("div",y,[(r(!0),o(_,null,Q(i.currentQuestion.options,s=>(r(),o("div",{key:s.id,class:d(["option-item",{selected:n.selectedOption===s.id,correct:n.showAnswer&&s.isCorrect,incorrect:n.showAnswer&&n.selectedOption===s.id&&!s.isCorrect}]),onClick:L=>i.selectOption(s.id)},[t("div",v,u(s.id.toUpperCase()),1),t("div",g,u(s.text),1),n.showAnswer?(r(),o("div",C,[s.isCorrect?(r(),o("i",A)):n.selectedOption===s.id?(r(),o("i",O)):c("",!0)])):c("",!0)],10,q))),128))]),n.showAnswer?(r(),o("div",E,[e[6]||(e[6]=t("h3",null,"解説",-1)),t("p",null,u(i.currentQuestion.explanation),1)])):c("",!0)])):c("",!0),t("div",I,[n.showAnswer?n.currentQuestionIndex<i.totalQuestions?(r(),o("button",{key:1,onClick:e[1]||(e[1]=(...s)=>i.nextQuestion&&i.nextQuestion(...s)),class:"btn btn-primary btn-block"}," 次の問題へ ")):(r(),o("button",{key:2,onClick:e[2]||(e[2]=(...s)=>i.finishQuiz&&i.finishQuiz(...s)),class:"btn btn-primary btn-block"}," 結果を見る ")):(r(),o("button",{key:0,onClick:e[0]||(e[0]=(...s)=>i.checkAnswer&&i.checkAnswer(...s)),class:"btn btn-primary btn-block",disabled:!n.selectedOption}," 回答する ",8,M))]),n.showExitModal?(r(),o("div",N,[t("div",B,[e[7]||(e[7]=t("h3",null,"クイズを終了しますか？",-1)),e[8]||(e[8]=t("p",null,"進捗は保存されません。",-1)),t("div",S,[t("button",{onClick:e[3]||(e[3]=s=>n.showExitModal=!1),class:"btn btn-outline"},"キャンセル"),t("button",{onClick:e[4]||(e[4]=(...s)=>i.exitQuiz&&i.exitQuiz(...s)),class:"btn btn-primary"},"終了する")])])])):c("",!0),t("div",{class:"exit-button",onClick:e[5]||(e[5]=(...s)=>i.confirmExit&&i.confirmExit(...s))},e[9]||(e[9]=[t("i",{class:"mdi mdi-close"},null,-1)]))])}const j=h(m,[["render",V],["__scopeId","data-v-8c7e81f7"]]);export{j as default};
